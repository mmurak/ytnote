<html>
<head>
    <title>YouTube Note-taker</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" >
    <link rel="shortcut icon" href="../KiwiBirdPink.png">
<!--
    <link rel="stylesheet" type="text/css" href="style.css">
-->
</head>
<body>

<h1>YouTube Note-takerとは</h1>

<h2>1. 概要</h2>

<p>　YouTube動画の再生に同期したノートを作成するプログラムです。本プログラム内からYouTube動画を開き、適宜ノートを書き込むことで、動画再生位置と各ノートが対応付けられます。このため、動画のブックマークとして利用したり、講義動画の内容に合わせてノートを取っておき、ワンクリック（またはワンタップ）で該当部分を再生、復習できるようになります。</p>

<p>　作成したノートは、保存ボタンを押すことで使っているデバイス内に保存されます（YouTubeにコメントとして書き込まれたり、どこかのクラウドに保存されるわけではありません）。保存されるファイルはテキストファイル形式（JSONフォーマット）であるため、テキストエディターで開いてみたり、他のアプリで処理することも可能です。</p>

<p>　本プログラムの公開URL（<a href="https://mmurak.github.io/ytnote/">https://mmurak.github.io/ytnote/</a>）にアクセスすると、まずプログラム本体と、YouTube（Google）が提供しているAPIをネットワーク経由でデバイスに取り込み、ローカル環境上でプログラムが動作します。実行中は、動画の再生で適宜YouTubeから動画データを取得する以外、通信は発生しません。</p>

<h2>2. ウィンドウ各部の名称</h2>

<p>
　ウィンドウ各部の名称は以下の通りです。</p>

<div style="text-align: center">
<img src="./window.png" style="width: 80%" align="center"/>
</div>

<blockquote>
<ol>
<li><strong>動画ID入力ボタン</strong>：YouTube動画のURLまたは動画IDを入力する際に使用します。特定の動画に初めてノートを付ける場合はこのボタンを押して作業を開始します。</li>
<li><strong>ノートファイル入力ボタン</strong>：デバイスに保存したノートファイルを使用する際にはこのボタンを押して作業を開始します。</li>
<li><strong>ノートファイル保存ボタン</strong>：デバイスにノートを保存する際に使用します。</li>
<li><strong>動画表示領域</strong>：YouTubeの動画が表示される領域です。</li>
<li><strong>再生／一時停止ボタン</strong>：動画の再生時に押すと一時停止し、一時停止時に押すと現在の時点から再生が開始されます。</li>
<li><strong>2秒巻き戻しボタン</strong>：動画の再生位置を2秒分さかのぼります（再生時には再生が継続され、一時停止時には一時停止したままとなります）。</li>
<li><strong>ノート書き込みボタン</strong>：ノートを書き込む場合に使用します（再生時には一時停止してダイアログボックスがオープンします）。</li>
<li><strong>ノート表示領域</strong>：ノートが表示される領域です。</li>
</ol>
</blockquote>

<h2>3. 通常の使い方</h2>


<p>　使い方は概ね以下のようになります。</p>

<h4>(1). ［動画ID入力ボタン］を押してURLまたは動画IDを入力する。</h4>

<p>　［動画ID入力ボタン］を押すと、以下のダイアログボックスがオープンします。</p>

<div style="text-align: center">
<img src="./IDentry.png" style="width: 60%" align="center"/>
</div>

<p>　このプログラムはURLが指定されると、そのURL内に含まれている11桁の動画IDを抽出するようになっています。このため、短縮URLを指定しても（動画IDが読み取れないため）正しく動作しません。</p>

<p>また、動画IDが分かっている場合には、その値を直接記述することもできます。</p>

<p>対応している入力形式は以下の通りです。
<ul>
<li>https://youtu.be/<span style="color: red">動画ID</span></li>
<li>https://www.youtube.com/watch?v=<span style="color: red">動画ID</span></li>
<li>https://www.youtube.com/v/<span style="color: red">動画ID</span></li>
<li><span style="color: red">動画ID</span></li>
</ul>
</p>

<h4>(2). ノートを作成する場所まで動画再生位置を動かす。</h4>

<p>　動画の再生位置を動かすには以下の方法があります。
<ul>
<li>動画表示領域内にあるYouTubeが提供している機能（スライダー等）を使って移動する。</li>
<li>［再生／一時停止ボタン］（あるいは［2秒巻き戻しボタン］）を押して、その位置まで再生する。</li>
</ul>
</p>

<h4>(3). ［ノート書き込みボタン］を押してノートを書き込む。</h4>

<p>　［ノート書き込みボタン］を押すと、以下のダイアログボックスが表示されるため、［description］欄にノートを書き込んだ後、［Register］ボタンを押します。なお、再生中にこのボタンを押した場合、再生は一時停止されます。</p>

<div style="text-align: center">
<img src="./noteDialog.png" style="width: 40%" align="center"/>
</div>

<p>　なお［Time］欄はノートに対応付けられる動画再生位置を冒頭からの通算秒数で示した値になっています。通算秒数もこのダイアログボックスから修正することができます。</p>

<p>　ノートを作成していくと、以下の図のように［ノート表示領域］に作成したノートが表示されていきます。</p>

<div style="text-align: center">
<img src="./note.png" style="width: 80%" align="center"/>
</div>

<p>　図の説明通りですが、［ゴミ箱ボタン］で該当ノートが削除され、［鉛筆ボタン］でノートの内容（そして対応する時間）を変更できます。</p>

<p>　青で表示されたノート部分をクリックすると、対応付けられている動画再生位置に移動します（再生中の場合にはそのまま再生が継続され、一時停止の場合には再生位置の移動のみが行われます）。</p>


<h4>(4). 作業終了時には［ノートファイル保存ボタン］を押してファイルに保存する。</h4>

<p>　ダイアログボックスが表示されます。ダイアログボックスが表示された際、ファイル名は動画IDになっていますが、好きな名前に変更することもできます。</p>



<h2>4. ショートカットキーについて（PCで使用する場合のみの話）</h2>

<p>　以下の4つのショートカットキーが設定されています。
<ul>
<li>"S" ・・・ ファイル保存ボタン</li>
<li>"Q" ・・・ 再生／一時停止ボタン</li>
<li>"E" ・・・ 2秒巻き戻しボタン</li>
<li>"I" ・・・ ノート書き込みボタン</li>
</ul>
　ただし、動画表示領域内のコントロールを使用した場合、YouTube API側がキーボード関係の操作を一時的に横取りする（フォーカスが置かれた状態になる）ため、(S)／(Q)／(E)／(I)のショートカットキーが機能しなくなります。このため、該当コントロールを操作した後は、動画表示領域以外の部分を一度クリックしてください（これで動画表示領域からフォーカスが外れ、再びショートカットキーが使えるようになります）。
</p>

<h2>5. 出力ファイルについて</h2>

<p>　出力されるノートファイルはJSONと呼ばれる規格に従ったかたちで出力されます。ファイル自体はテキスト形式なので、この形式に関する知識があればテキストエディターで直接編集することも可能です。
</p>

<p>　簡単に書くと、以下のような形式になっています。</p>

<pre>
{ "ID" : "<span style="color:red">〜動画ID〜</span>",
    "entry" : [
        { "time" : "<span style="color:red">〜通算秒数〜</span>", "description" : "<span style="color:red">〜ノートの内容〜</span>" },
                                                <span style="color:red">・</span>
                                                <span style="color:red">・</span>
                                                <span style="color:red">・</span>
        { "time" : "<span style="color:red">〜通算秒数〜</span>", "description" : "<span style="color:red">〜ノートの内容〜</span>" }
    ]
}
</pre>

<p>　なお、ノート内の改行は「\n」で、二重引用符は「\"」で表現されます。</p>


<h2>6. その他</h2>

<p>　本プログラムはYouTubeが公式に提供しているiFrame APIを使用しています。このため「YouTubeでのみ閲覧」とされている一部の動画については再生できない場合があります。</p>

<h2>7. ライセンス</h2>

<p>　YouTubeのiFrame APIを除くコード部分はMITライセンスになっています。</p>

</body>
</html>
